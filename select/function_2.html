<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/index.css?ver=1.0">
    <link rel="stylesheet" href="css/func2.css?ver=1.0">
    <script src="js/index.js?var=1.2"></script>
    <script src="js/session.js?ver=1.0"></script>
    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>농장팜니다</title>
</head>

<body class="preload">
    <!-- top -->
    <div class="header">
        <div class="title">
            <h3 class="title-txt" onclick="location.href='select.html'">재배 환경 데이터</h3>
        </div>
        <div class="infobox">
            <a class="info" href="#" onclick="getBack()">돌아가기</a>
            <a class="info" href="#" onclick="checkSession()">세션 확인</a>
            <!-- test -->
        </div>
    </div>
    <!-- mid -->
    <div class="backgrounds">
        <div class="container">
            <div class="data-box">
                <div class="title">
                    <h2>환경 데이터 현황</h2>
                </div>
                <div class="temp-cnt">
                    <input type="text" class="data temp" id="temp" value="온도: null ℃" readonly> <!-- 온도 -->
                </div>
                <div class="hum-cnt">
                    <input type="text" class="data hum" id="hum" value="습도: null %" readonly> <!-- 습도 -->
                </div>
                <div class="ph-cnt">
                    <input type="text" class="data ph" id="ph" value="산성도: null pH" readonly> <!-- PH -->
                </div>
                <div class="led-cnt">
                    <input type="text" class="data led" id="led" value="밝기: null %" readonly> <!-- LED -->

                    <input type="range" id="slider" class="slider" oninput="Drag()" value="1" min="1" max="10">
                    <p id="lastvalue" class="last">현재 LED 밝기: null %</p>
                    <input type="hidden" id="set" value="N"> <!-- 데이터 비교 -->
                </div>
                <p id="er1 msg" style="color: red;"></p>
                <p id="suc1 msg" style="color: green;"></p>
            </div>
        </div>
        <div class="control">
            <input type="button" onclick="dataTransmission()" class="btn" value="적용">
        </div>
    </div>
    <!-- bottom -->
    <div class="btm-row">
        <div class="softbox">
            <p class="copyright">T.032-766-8425 </p>
            <p class="copyright">인천광역시 남구 석정로 165 </p>
            <p class="copyright">Copyright 2023. MDP(Meister Development Project). All rights reserved. </p>
        </div>
    </div>
    <script>
        window.onload = function () {
            callData();
        }

        var slider = document.getElementById('slider');
        var setBefore = document.getElementById('set');
        var time = 1000 * 3; // 5sec count

        function Drag() {
            var per = slider.value;
            if (setBefore.value === 'Y') { // true
                $("#led").val("밝기: " + per * 10 + " %");
            } else { // setBefore.value = N(false)
                $("#slider").val(1);
            }
        }

        // Called Data every 'time' 
        setInterval(callBack, time);
    </script>
</body>

</html>