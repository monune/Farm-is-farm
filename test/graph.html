<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://example.com">
    <link rel="dns-prefetch" href="https://example.com">
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
    <title>text Graph</title>
</head>
<body>
    <canvas id="graphCanvas" width="500" height="300"></canvas>
    <script>
        // 애니메이션 효과를 위한 보간 함수
        function lerp(start, end, t) {
            return start + t * (end - start);
        }
    
        // 값 애니메이션 함수
        function animateValue(target, property, endValue, duration) {
            var startValue = target[property];
            var startTime = performance.now();
    
            function update() {
                var currentTime = performance.now();
                var elapsed = currentTime - startTime;
                var t = Math.min(1, elapsed / duration);
    
                target[property] = lerp(startValue, endValue, t);
                drawGraph();
    
                if (t < 1) {
                    requestAnimationFrame(update);
                }
            }
    
            requestAnimationFrame(update);
        }
    
        // 그래프 그리기 함수
        function drawGraph() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
    
            var graphWidth = canvas.width / (data.length - 1);
            var graphHeight = canvas.height / 5;
    
            // 데이터에 따라 그래프 그리기
            ctx.beginPath();
            ctx.moveTo(0, canvas.height - (data[0].y * graphHeight));
    
            for (var i = 1; i < data.length; i++) {
                var x = i * graphWidth;
                var y = canvas.height - (data[i].y * graphHeight);
                ctx.lineTo(x, y);
            }
    
            ctx.strokeStyle = "blue"; // 그래프 선 색상
            ctx.stroke();
        }
    
        // 랜덤한 높이 값 가져오기
        function getRandomHeight() {
            return Math.floor(Math.random() * 5) + 1;
        }
    
        // 자동으로 그래프 값 변화
        setInterval(function() {
            for (var i = 0; i < data.length; i++) {
                var target = data[i];
                var newHeight = getRandomHeight();
                animateValue(target, 'y', newHeight, 300);
            }
        }, 5000);
    
        // 캔버스 요소와 2D 컨텍스트 가져오기
        var canvas = document.getElementById("graphCanvas");
        var ctx = canvas.getContext("2d");
    
        // 그래프 데이터
        var data = [
            { x: 1, y: getRandomHeight() },
            { x: 2, y: getRandomHeight() },
            { x: 3, y: getRandomHeight() },
            { x: 4, y: getRandomHeight() },
            { x: 5, y: getRandomHeight() },
            { x: 6, y: getRandomHeight() },
            { x: 7, y: getRandomHeight() },
            { x: 8, y: getRandomHeight() },
            { x: 9, y: getRandomHeight() },
            { x: 10, y: getRandomHeight() }
        ];
    
        drawGraph(); // 그래프 초기 그리기
    </script>
    
    
</body>
</html>